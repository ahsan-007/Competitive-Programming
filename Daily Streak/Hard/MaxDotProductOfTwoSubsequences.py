# https://leetcode.com/problems/max-dot-product-of-two-subsequences/description/?envType=daily-question&envId=2026-01-08


from typing import List
from heapq import heappop, heappush, heapify


class Solution:
    def maxDotProduct(self, nums1: List[int], nums2: List[int]) -> int:
        def maxDotProductUtil(nums1, nums2, i, j, memo):
            if i >= len(nums1) or j >= len(nums2):
                return float("-inf")

            if (i, j) not in memo:

                nextDotProduct = maxDotProductUtil(
                    nums1, nums2, i + 1, j + 1, memo)

                memo[(i, j)] = max(
                    nextDotProduct,
                    nextDotProduct + (nums1[i] * nums2[j]),
                    nums1[i] * nums2[j],
                    maxDotProductUtil(nums1, nums2, i + 1, j, memo),
                    maxDotProductUtil(nums1, nums2, i, j + 1, memo)
                )
            return memo[(i, j)]

        return maxDotProductUtil(nums1, nums2, 0, 0, memo={})


print(Solution().maxDotProduct(nums1=[2, 1, -2, 5], nums2=[3, 0, -6]))
print(Solution().maxDotProduct(nums1=[3, -2], nums2=[2, -6, 7]))
print(Solution().maxDotProduct(nums1=[-1, -1], nums2=[1, 1]))
print(Solution().maxDotProduct(nums1=[-5, -1, -2], nums2=[3, 3, 5, 5]))
print(Solution().maxDotProduct(nums1=[-118, 16, -949, 322, -78, 50, -50, -729, -865, 567, -41, 748, 860, 187, 476, 215, 195, 542, -334, -742,
                                      -812, -156, 793, -166, 985, 522, 369, -824, -176, -
                                      222, -458, -970, 541, 382, 934, -574, -935, -409,
                                      -957, 48, -444, 244, -517, 312, 637, -154, -736, -
                                      337, -861, 648, -866, -696, 938, -670, 224, -136, 649,
                                      475, -382, 300, -479, 70, 460, 479, -193, 442, 257, 189, -
                                      168, 981, -64, -603, 648, 298, 535, 128, 568,
                                      -467, -353, 923, 491, 379, -588, 961, -350, 451, -
                                      966, 388, -323, -36, 401, 905, -87, 204, 130, -962, -709,
                                      -873, -657, 474, 763, 447, 529, 671, 899, -202, -651, -
                                      214, -172, -12, 304, 225, 350, -862, 426, 15, 817, 313,
                                      -912, -47, 13, 763, -983, -290, -377, 649, 682, 909, 53, -
                                      346, 511, -485, 914, -668, -456, 197, 568, -656, -221,
                                      -44, -781, -878, -123, -585, -200, -394, -725, 115, -744, -
                                      805, 128, -503, 503, -544, 509, 847, 896, -969, 171,
                                      -559, 984, -120, -917, -127, -237, 539, -668, 531, -315, -
                                      33, 420, 760, 983, 143, -836, 286, 787, 430, 840, 706,
                                      985, -642, -769, -126, 625, 711, -977, 679, -164, 244, -
                                      871, 971, -431, -598, 510, -826, 957, 778, -722, -754, 541,
                                      -253, -426, 460, -948, -333, 873, 933, -710, 537, 817, -
                                      274, 243, 979, 38, -267, 681, 912, -843, 781, -232, 906,
                                      -498, -877, -207, -504, -862, 88, 934, 899, 41, 344, 129, -
                                      576, 801, -680, 723, 664, 166, 141, 216, 766, -908,
                                      -321, -630, 27, 323, 38, 431, 448, -105, -870, 78, 79, -
                                      358, -926, 348, 763, 106, -671, -421, -417, 202, -358,
                                      -418, -299, -73, 230, -337, -722, 641, -69, 206, -
                                      273, 67, 631, 345, 957, -831, 979, 964, -274, -489, 784, -706,
                                      117, -6, 233, -814, 881, 793, 405, 451, -638, 637, -910, -
                                      706, -71, -709, 874, -521, -179, -405, -528, 395, 223,
                                      235, -18, -769, -552, -993, -120, 731, -192, 309, -203, -
                                      763, -836, -64, 590, 333, 221, -585, -713, 897, -657, 544,
                                      -762, 853, 748, -825, 686, -415, -867, 6, 725, 522, 666, 4, 163, 801, -
                                      441, -727, 630, 151, -843, -755, -949, 465,
                                      398, 728, 519, -284, -90, -988, -392, 320, -952, -97, 77, -
                                      11, -145, -129, 103, -278, 272, -893, 829, -405, -188,
                                      759, -261, 376, 883, 946, 589, -246, 62, 552, 64, -611, -
                                      228, -185, 750, 997, 894, -478, 678, 820, -877, 943, -913,
                                      401, -893, 216, -921, 907, 266, -453, -366, 241, 810, 542, -
                                      193, -428, -788, 729, -314, -692, -538, -498, 251, 497,
                                      20, 815, 150, 692, -972, -202, 325, 473, -307, -
                                      977, 131, 962, 615, 702, 245, 296, -226, 44, 472, -452, 135, 247, 220,
                                      -336, 392, -56, -119, 84, -280, -133, 786, -569, 822, 633, -
                                      107, -442, -746, -896, 22, 249, -161, -686, 79, -521,
                                      -973, -614, -740, 963, -680, 901, 767, 130, -163, 862, -
                                      219, -954, -568, 108, 817, 215, 354, -740, -968, -742, 620,
                                      -925, 612, -444, 572, -766, 120, 175, 779, 460, 105, -659, -146, -306, 371, 230, 752, -966, 669, 700, 507, 990, -695],
                               nums2=[-368, 260, 268, 388, -360, 766, 202, 505, 958, -213, -308, -153, -978, -516, -66, -506, -704, 75, -714, -553,
                                      -17, -828, -814, 946, -861, 613, -958, -513, -438, -
                                      138, 890, 457, -773, 98, 419, 917, 952, -518, 132, 789,
                                      339, 184, 234, 189, 683, 469, -28, -697, -778, -544, -
                                      98, -240, 579, -204, 361, -832, 820, -41, 36, 662, 466,
                                      -569, 982, 895, 417, -440, 192, -465, 742, 512, 71, 384, 32, 771, -
                                      317, 481, 453, -894, -981, 987, 222, 993,
                                      750, -155, 704, -342, 186, -553, 774, 484, 588, -837, -
                                      977, 55, -301, 633, -120, 890, 106, -542, -335, 811,
                                      -712, -44, 830, 548, -356, 664, 512, -587, -849, -
                                      984, 274, 466, 49, -357, 1000, 306, 250, -638, 884, -830,
                                      736, 287, -316, 749, -210, 514, 838, 908, 519, -395, 286, -
                                      508, 425, -688, 577, -677, -641, 638, -881, -960,
                                      909, 784, 493, 460, -571, 730, 291, 142, 348, -470, 520, -
                                      78, 816, -605, 917, 177, -581, 835, 773, 449, -572,
                                      -855, -53, -438, 315, -225, 251, -678, -790, -564, -
                                      416, -953, -164, 887, 197, -564, 258, -623, 464, 633,
                                      -755, 344, 557, 198, 750, 312, 601, -482, -310, -
                                      264, 406, 292, -23, -694, -31, -366, -324, 466, 74, 557,
                                      -103, -749, -858, 316, 392, -615, -601, -78, -428, -
                                      768, -706, 894, 701, 773, -985, -968, 339, 668, -610,
                                      -781, -210, 889, 799, 366, -190, -766, -7, -734, -190, -
                                      499, 789, -463, -98, 457, 980, -885, 171, 833, 316,
                                      813, 267, -88, 146, -878, -753, 165, 546, -564, 826, -
                                      808, 247, 980, 166, -927, 286, -434, -52, -126, -524,
                                      97, -453, 780, -653, 837, 44, -863, 219, 851, 551, 181, 943, 942, 661, 49, -
                                      930, -301, 601, -766, -9, -209,
                                      -335, -918, 137, 271, -568, 23, 482, -330, 516, 169, 831, -
                                      523, -133, -488, -956, -920, 988, -312, -381,
                                      -237, 537, -880, -420, -167, -305, -70, -666, 96, 286, -
                                      584, 77, 120, 371, -68, -306, 819, 715, -987, -59,
                                      -44, 583, -729, -809, 415, 687, 772, -965, -129, -
                                      990, 849, -668, -122, -593, 832, 628, 864, 583, 14, 117,
                                      569, 131, 599, 388, -976, -585, -491, -459, 733, 280, -
                                      17, 89, 183, -353, -641, 402, 252, -969, 550, -188,
                                      894, -858, 522, -273, 674, -540, 941, 909, -479, 107, -
                                      100, 624, 877, -519, -505, 476, -91, -676, -540, -892,
                                      -390, -817, 789, -876, 225, -580, 699, 214, -
                                      362, 26, 852, 842, -950, -917, 459, -430, 396, 131, 976, -388,
                                      -714, 552, 475, -336, 133, 768, 605, -894, -815, -
                                      792, 53, -212, 902, 614, 173, 812, 445, 207, 633, 518,
                                      797, 623, -412, -994, -515, 559, -364, 442, 384, -
                                      825, -411, -660, -11, 745, -121, -276, 545, 896, 320,
                                      -726, 961, 437, 989, 206, -974, 404, 554, -562, -208, -
                                      438, 879, 772, -840, 137, -29, 76, -782, 47, 896,
                                      216, -839, -162, -760, -468, 574, 289, -113, -
                                      899, 248, 225, -816, 424, 69, -770, 948, -602, 617, -326,
                                      -283, 44, 527, -24, 271, 122, -873, 542, -83, 684, -297, -525, 166, 726, 353, 678, 178, -881, -127, 423, -226]))
